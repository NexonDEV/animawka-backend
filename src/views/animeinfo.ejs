<% extend('layout') %>

<main>
	<div class="container">
		<div class="row">
			<% if (data == null) {%>
				<div class="col s12 offset-m3 m6">
					<div class="card-panel red">
						<span class="white-text">
							Nie mamy tego anime w bazie danych.
						</span>
					</div>
				</div>
			<% } else { %>
<!--<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@id": "https://shinden.pl/series/49218-no-game-no-life-zero",
    "@type": "TVSeries",
    "name": "No Game No Life - Zero-",
    "image": {
        "@type": "ImageObject",
        "url": "https://shinden.pl/res/images/genuine/205155.jpg"
    },
    "thumbnailUrl": "https://shinden.pl/res/images/225x350/205155.jpg",
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "9.07",
        "bestRating": "10",
        "reviewCount": 320
    }
}</script> -->

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@id": "https://animawka.pl/anime/<%- db.name2url(data.name) %>",
    "@type": "TVSeries",
    "name": "<%= data.name %>",
    "image": {
        "@type": "ImageObject",
        "url": "<%= data.image %>"
    },
    "thumbnailUrl": "<%= data.image %>"
}</script>
				<div class="col s12">
					<div class="card medium hide-on-large-only">
						<div class="card-image waves-effect waves-block waves-light">
							<img class="activator" src="<%= data.image %>"/>
							<span class="card-title boldtitle activator"><%= data.name %></span>
						</div>
						<div class="card-content">
							<p>
								<% if (data.namejap != null && data.namejap != "") {%>
								<strong>Tytuł japoński: </strong><%= data.namejap %><br/>
								<% } %>
								
								<% if (data.nameeng != null && data.nameeng != "") {%>
								<strong>Tytuł angielski: </strong><%= data.nameeng %>
								<br/>
								<% } %>
								
								<% if (data.episodes != null && data.episodes != "") {%>
								<strong>Liczba odcinków: </strong><%= data.episodes %><br/>
								<% } %>
								
								<% if (data.status != null && data.status != "") {%>
								<strong>Status: </strong><%= db.getStatus(data.status) %><br/>
								<% } %>
								
								<% if (data.emission != null && data.emission != "") {%>
								<strong>Data emisji: </strong><%= data.emission %><br/>
								<% } %>
								
								<% if (data.season != null && data.season != "" && data.seasonyear != null && data.seasonyear != "") {%>
								<strong>Sezon: </strong>
								<% if (data.season == '0'){ %>
								Wiosna 
								<% } %>
								<% if (data.season == '1'){ %>
								Lato 
								<% } %>
								<% if (data.season == '2'){ %>
								Jesień 
								<% } %>
								<% if (data.season == '3'){ %>
								Zima 
								<% } %>
								
								<%= data.seasonyear %><br/>
								<% } %>
								
								<% if (data.translate != null && data.translate != "") {%>
								<strong>Tłumacz: </strong><%= data.translate %><br/>
								<% } %>
								
								<% if (data.corrector != null && data.corrector != "") {%>
								<strong>Korektor: </strong><%= data.corrector %><br/>
								<% } %>
								
								<% if (data.date != null && data.date != "") {%>
								<strong>Dodano: </strong><%= data.date %><br/>
								<% } %>
								
								<strong>Dodał: </strong><%= user %><br/>

								
								<% if (data.episodelen != null && data.episodelen != "") {%>
								<strong>Długość odcinka: </strong><%= data.episodelen %> min.
								<% } %><br/>
								<% if (data.studio != null && data.studio != "") {%>
								<strong>Studio: </strong><%= data.studio %>
								<% } %><br/>
								<% if (data.mal != null && data.mal != "") {%>
								<strong>MyAnimeList: </strong><a href="<%= data.mal %>"><%= data.mal %></a>
								<% } %>
							</p>
						</div>
						<div class="card-reveal">
							<span class="card-title grey-text text-darken-4">Akcje<i class="material-icons right">close</i></span>
								<% if (session && session.admin) { %>
								<ul>
									<li><a href="/admin/editanime/<%- db.name2url(data.name) %>">Edytuj</a></li>
									<li><a href="/admin/newepisode/<%= data.ID %>">Dodaj odcinek</a></li>
								</ul>
								<% } %>
								
						</div>
					</div>

					<div class="card horizontal hide-on-med-and-down">
						<div class="card-image waves-effect waves-block waves-light">
							<img class="activator" height="300px" src="<%= data.image %>">
						</div>
						<div class="card-stacked">
							<div class="card-content">
								<span class="card-title grey-text text-darken-4"><%= data.name %>
									<% if (session && session.admin) { %>
										<a class='dropdown-button waves-effect waves-gray btn-floating btn-flat white right' href='#' data-activates='animemenu' data-constrainwidth='false'><i class="material-icons black-text">more_vert</i></a>
									<% } %>
								</span>
								<% if (session && session.admin) { %>
								<ul id='animemenu' class='seltheme dropdown-content'>
									<li><a href="/admin/editanime/<%- db.name2url(data.name) %>">Edytuj</a></li>
									<li><a href="/admin/newepisode/<%= data.ID %>">Dodaj odcinek</a></li>
								</ul>
								<% } %>
								
								<p>
								<% if (data.namejap != null && data.namejap != "") {%>
								<strong>Tytuł japoński: </strong><%= data.namejap %><br/>
								<% } %>
								
								<% if (data.nameeng != null && data.nameeng != "") {%>
								<strong>Tytuł angielski: </strong><%= data.nameeng %>
								<br/>
								<% } %>
								
								<% if (data.episodes != null && data.episodes != "") {%>
								<strong>Liczba odcinków: </strong><%= data.episodes %><br/>
								<% } %>
								
								<% if (data.status != null && data.status != "") {%>
								<strong>Status: </strong><%= db.getStatus(data.status) %><br/>
								<% } %>
								
								<% if (data.emission != null && data.emission != "") {%>
								<strong>Data emisji: </strong><%= data.emission %><br/>
								<% } %>
								
								<% if (data.season != null && data.season != "" && data.seasonyear != null && data.seasonyear != "") {%>
								<strong>Sezon: </strong>
								<% if (data.season == '0'){ %>
								Wiosna 
								<% } %>
								<% if (data.season == '1'){ %>
								Lato 
								<% } %>
								<% if (data.season == '2'){ %>
								Jesień 
								<% } %>
								<% if (data.season == '3'){ %>
								Zima 
								<% } %>
								
								<%= data.seasonyear %><br/>
								<% } %>
								
								<% if (data.translate != null && data.translate != "") {%>
								<strong>Tłumacz: </strong><%= data.translate %><br/>
								<% } %>
								
								<% if (data.corrector != null && data.corrector != "") {%>
								<strong>Korektor: </strong><%= data.corrector %><br/>
								<% } %>
								
								<% if (data.date != null && data.date != "") {%>
								<strong>Dodano: </strong><%= data.date %><br/>
								<% } %>
								
								<strong>Dodał: </strong><%= user %><br/>

								
								<% if (data.episodelen != null && data.episodelen != "") {%>
								<strong>Długość odcinka: </strong><%= data.episodelen %> min.
								<% } %><br/>
								<% if (data.studio != null && data.studio != "") {%>
								<strong>Studio: </strong><%= data.studio %>
								<% } %><br/>
								<% if (data.mal != null && data.mal != "") {%>
								<strong>MyAnimeList: </strong><a href="<%= data.mal %>"><%= data.mal %></a>
								<% } %>
								</p>
							</div>
						</div>

						<div class="card-reveal">
							<span class="card-title grey-text text-darken-4"><%= data.name %><i class="material-icons right">close</i></span>
							<p><%- db.nl2br(data.description) %></p>
						</div>
					</div>
				</div>
				
				<div class="col s12 m6">
					<div class="card">
						<div class="card-content">
							<span class="card-title">Opis</span>
							<p><%- db.nl2br(data.description) %></p>
						</div>
					</div>
				</div>

				<div class="col s12 m6">
					<div class="card">
						<div class="card-content">
							<span class="card-title">Lista odcinków</span>
						<% if (episodes.length == 0) {%>
							<span class="red-text">Odcinki nie zostały jeszcze przetłumaczone/zuploadowane.</span>
						</div>
						<% } else { %>
						</div>
						<div class="collection">
							<% for (var i = 0; i < episodes.length; i++) {%>
								<a href="/anime/<%- db.name2url(data.name) %>/<%- episodes[i].episode %>" class="collection-item black-text">
								<% if (episodes[i].episode == 0) { %> Zapowiedź <% } else {%>
									Odcinek <%- db.getAnimeType(episodes[i].type) %> <%- (episodes[i].override != null && episodes[i].override > 0) ? episodes[i].override : episodes[i].episode %>
									<% if (episodes[i].name != null && episodes[i].name != "") { %>
									- <%- episodes[i].name %>
									<% } %>
								<%
								}
								%>
								</a>
							<% } %>
						</div>
						<% } %>
					</div>
				</div>
			<% } %>
		</div>
	</div>
</main>